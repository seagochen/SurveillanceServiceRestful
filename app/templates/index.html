<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>不審者パラメータ設定ツール ver 1.0</title>
    <script src="{{ url_for('static', filename='js/htmx.min.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
    <script src="{{ url_for('static', filename='js/custom.js') }}" defer></script>
</head>
<body>
    
    <div id="success-modal" class="success-modal" style="display: none;">
        <p id="modal-message"></p>
    </div>

    <div id="confirmation-modal" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <p id="confirmation-message">本当に実行しますか？</p>
            <div class="modal-actions">
                <button id="cancel-btn">キャンセル</button>
                <button id="confirm-btn" class="danger">確認</button>
            </div>
        </div>
    </div>


    <main id="main-content">
        <header class="main-header">
            <div class="title-group">
                <img src="{{ url_for('static', filename='images/logo-cropped.svg') }}" alt="Logo" class="header-logo">
                <h1>不審者検知システム設定ツール</h1>
            </div>

            <div id="pipeline-status-indicator"
                 hx-get="/get-pipeline-indicator"
                 hx-trigger="load, every 3s"
                 hx-swap="innerHTML">
                <span class="label" style="font-size: 0.7em;">
                    推論モジュール:
                </span>
                <span class="dot dot-yellow"></span>
                <span style="font-size: 0.7em;">Loading...</span>
            </div>
        </header>

        <section class="grid-section">
            <h3>カメラの動作状態</h3>
            <div
                id="magistrate-grid-container"
                class="status-grid"
                hx-get="/get-magistrate-grid"
                hx-trigger="load, every 3s"
                hx-target="this"
                hx-swap="innerHTML"
            >
                <div class="status-box status-disabled">クライアント 1</div>
                <div class="status-box status-disabled">クライアント 2</div>
                <div class="status-box status-disabled">クライアント 3</div>
                <div class="status-box status-disabled">クライアント 4</div>
                <div class="status-box status-disabled">クライアント 5</div>
                <div class="status-box status-disabled">クライアント 6</div>
                <div class="status-box status-disabled">クライアント 7</div>
                <div class="status-box status-disabled">クライアント 8</div>
            </div>
        </section>

        <div class="main-actions">
            <button onclick="showConfirmationModal('初期設定を使用しますか?', '/config/reset', 'POST')">
                初期設定
            </button>
            <button onclick="showConfirmationModal('すべての設定ファイルを読み込みますか？', '/config/load_all', 'POST')">
                読み込み
            </button>
            <button class="danger" onclick="showConfirmationModal('すべての設定ファイルを同期しますか？', '/config/sync_all', 'POST')">
                書き込み
            </button>
            <button class="primary" onclick="showConfirmationModal('不審検知サービスを再起動しますか？', '/config/restart_service', 'POST')">
                再起動
            </button>
        </div>

    </main> 

</body>
</html>